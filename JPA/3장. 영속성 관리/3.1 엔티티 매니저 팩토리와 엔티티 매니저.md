# 3.1 엔티티 매니저 팩토리와 엔티티 매니저

---

- 엔티티 매니저 : 엔티티를 저장, 수정, 삭제 조회하는 등 엔티티와 관련된 모든 일 처리

## 엔티티 매니저 팩토리

- 데이터베이스를 하나만 사용하는 애플리케이션은 일반적으로 EntityManager Factory를 하나만 생성함.
- 엔티티 매니저 팩토리 생성 코드

```java
//공장 만들기, 비용이 아주 많이 든다. (실행할 때, 한번만 하는게 좋음?)
EntityManagerFactory emf = Persistence.createEntityManagerFactory("jpabook");
```

- 엔티티 매니저를 만드는 공장, 공장 만드는 비용 상당히 큼
    - 한 개만 만들어서 애플리케이션 전체에서 공유하도록 설계되어 있음.
- 공장에서 엔티티 매니저를 생성하는 비용은 거의 들지 않음.
- **여러 스레드가 동시에 접근해도 안전함**
    - 서로 다른 스레드 간에 공유 가능
    - **엔티티 매니저** : 여러 스레드가 동시에 접근하면 동시성 문제 발생(스레드 간의 공유 절대 X)

![Untitled](https://github.com/juhyun-99/TIL/assets/72910402/7372f5cd-01b6-48ab-a298-ef5990f48fa7)

- 엔티티 매니저는 데이터베이스 연결이 꼭 필요한 시점까지 커넥션을 얻지 않음.
